<!DOCTYPE html>
<html>

<head>
	<meta charset="ISO-8859-1">
	<title>Employee HomePage</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script>
		function logout() { //DONE
			let xhr = new XMLHttpRequest();

			xhr.open("POST", "http://localhost:8080/project-1/logout");
			xhr.send();

			sessionStorage.removeItem('currentUser');
			window.location = "http://localhost:8080/project-1/index.html";
		}

		function reim() { //DONE
			console.log("reim() started")
			console.log(sessionStorage.getItem('currentUser'))
			window.location = "http://localhost:8080/project-1/reim.html"
		}

		function pending() {  //DONE
			console.log("pending() started")
			console.log(sessionStorage.getItem('currentUser'))
			window.location = "http://localhost:8080/project-1/pending.html"
		}

		function resolved() { //DONE
			console.log("resolved() started")
			console.log(sessionStorage.getItem('currentUser'))
			window.location = "http://localhost:8080/project-1/resolved.html"
		}

		function profile() { //DONE
			console.log("profile() started")
			console.log(sessionStorage.getItem('currentUser'))
			window.location = "http://localhost:8080/project-1/profile.html"
		}

		function update() { //DONE
			console.log("update() started")
			console.log(sessionStorage.getItem('currentUser'))
			window.location = "http://localhost:8080/project-1/update.html"
		}

	</script>
</head>

<body>
	<div class="jumbotron">
		<h1 id="welcome">You are logged in!</h1>
		<script>
			let welcome = document.getElementById('welcome');
			let userString = sessionStorage.getItem('currentUser');
			let currentUser = JSON.parse(userString);

			if (userString === null) {
				// window.location = "http://localhost:8080/project-1/index.html"
			} else {
				console.log(currentUser);
				if (currentUser != null) {
					welcome.innerHTML = "Welcome " + currentUser.username;
				}
			}
		</script>
	</div>

	<button type="button" class="btn btn-outline-warning" onclick="profile()">View Profile</button>
	<br> <br>
	<button type="button" class="btn btn-outline-info" onclick="update()">Update Profile</button>
	<br><br>
	<button type="button" class="btn btn-outline-secondary" onclick="reim()">Submit Reimbursement</button>
	<br> <br>
	<button type="button" class="btn btn-outline-success" onclick="pending()">Pending requests</button>
	<br> <br>
	<button type="button" class="btn btn-outline-danger" onclick="resolved()">Resolved requests</button>
	<br> <br>
	<button type="button" class="btn btn-outline-primary" onclick="logout()">Logout</button>
	<br> <br>
	<div id="display"></div>
</body>

</html>